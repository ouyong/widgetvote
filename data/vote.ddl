CREATE TABLE tbl_vote (id int(10) NOT NULL comment '主键', title varchar(125) comment '调查标题', picpath varchar(125) comment '调查的图标地址', vote_type int(10) comment '投票类型. 0, 单选. 1, 多选', counts int(11), createrid int(10) comment '发起人id', creatername int(10) comment '发起人的妮称', createremail varchar(125) comment '发起人的邮箱地址', keyword varchar(64) comment '所属关键词, 跟随词条', createtime datetime comment '调查创建时间', voteendtime datetime comment '投票截至时间', audittype int(10) comment '审核模式. 0，先审后发；1, 先发后审', auditname varchar(255) comment '审核人名称', auditdate datetime comment '审核时间', auditstate int(10) comment '审批状态. -1，不通过； 0，待审核； 1，通过；', md5 varchar(125) comment '中搜微件hems系统中的关系id, 唯一值', PRIMARY KEY (id)) comment='投票调查表';
CREATE TABLE tbl_vote_cate_related (id int(10) NOT NULL comment '主键', vote_id int(10) NOT NULL, category_id int(10) NOT NULL comment '分类id', PRIMARY KEY (id)) comment='调查与分类的关系表';
CREATE TABLE tbl_vote_operate_log (id int(10) NOT NULL comment '主键', opttype varchar(64) comment '操作类型', opttime int(10) comment '操作时间', optname varchar(255) comment '操作人名称', content varchar(125) comment '日志内容', vote_id int(10) NOT NULL, PRIMARY KEY (id)) comment='调查表的操作日志';
CREATE TABLE tbl_vote_item (id int(10) NOT NULL comment '主键', itemtitle varchar(125) comment '调查选项标题', itemvotecount int(10) comment '选项总投票人数', displayorder int(11) comment '排列序号，显示的顺序值。', vote_id int(10) NOT NULL, PRIMARY KEY (id)) comment='调查选项表';
CREATE TABLE tbl_vote_category (id int(10) NOT NULL comment '主键', categoryname varchar(255), parent_id int(11), PRIMARY KEY (id)) comment='投票分类表';
ALTER TABLE tbl_vote_cate_related ADD INDEX FKtbl_vote_c243216 (vote_id), ADD CONSTRAINT FKtbl_vote_c243216 FOREIGN KEY (vote_id) REFERENCES tbl_vote (id);
ALTER TABLE tbl_vote_operate_log ADD INDEX FKtbl_vote_o484802 (vote_id), ADD CONSTRAINT FKtbl_vote_o484802 FOREIGN KEY (vote_id) REFERENCES tbl_vote (id);
ALTER TABLE tbl_vote_item ADD INDEX FKtbl_vote_i801022 (vote_id), ADD CONSTRAINT FKtbl_vote_i801022 FOREIGN KEY (vote_id) REFERENCES tbl_vote (id);
ALTER TABLE tbl_vote_cate_related ADD INDEX FKtbl_vote_c848462 (category_id), ADD CONSTRAINT FKtbl_vote_c848462 FOREIGN KEY (category_id) REFERENCES tbl_vote_category (id);
